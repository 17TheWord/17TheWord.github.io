<template><div><h1 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•" aria-hidden="true">#</a> ä½¿ç”¨æ–¹æ³•</h1>
<h3 id="å‰ç½®éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#å‰ç½®éœ€æ±‚" aria-hidden="true">#</a> å‰ç½®éœ€æ±‚</h3>
<ul>
<li>
<p><a href="https://github.com/mnixry/nonebot-plugin-guild-patch" target="_blank" rel="noopener noreferrer">nonebot-plugin-guild-patch<ExternalLinkIcon/></a>ï¼šé¢‘é“é€‚é…è¡¥ä¸ã€‚</p>
</li>
<li>
<p>ç›®å½•ç»“æ„å‚è€ƒï¼š</p>
</li>
</ul>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>ğŸ“¦ HarukaBot-master
â”œâ”€â”€ ğŸ“‚ plugins
â”‚   â”œâ”€â”€ ğŸ“‚ haruka_bot      # haruka_bot çš„æ’ä»¶ï¼ä¸æ˜¯ HarukaBotæœ¬èº« 
â”‚   â””â”€â”€ ğŸ“‚ nonebot_plugin_guild_patch        # é¢‘é“é€‚é…æ’ä»¶
â”œâ”€â”€ ğŸ“‚ src                 # æˆ–æ˜¯ HarukaBot-master
â”œâ”€â”€ ğŸ“œ .env                # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .env.dev            # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .env.prod           # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .gitignore
â”œâ”€â”€ ğŸ“œ bot.py
â”œâ”€â”€ ğŸ“œ docker-compose.yml
â”œâ”€â”€ ğŸ“œ Dockerfile
â”œâ”€â”€ ğŸ“œ pyproject.toml
â””â”€â”€ ğŸ“œ README.md
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„" aria-hidden="true">#</a> ç›®å½•ç»“æ„</h3>
<ul>
<li>
<p>è¯·åœ¨ <code v-pre>utils</code> ä¸­çš„ <code v-pre>__init__.py</code> ä¸­ä¿®æ”¹ ç¬¬20è¡Œï¼š</p>
</li>
<li>
<p><code v-pre>from plugins.nonebot_plugin_guild_patch import GuildMessageEvent</code></p>
</li>
<li>
<p>ä¸­çš„ <code v-pre>plugins.nonebot_plugin_guild_patch</code> éƒ¨åˆ†ï¼Œ</p>
</li>
<li>
<p>æ›¿æ¢ä¸ºè‡ªå·±çš„é¢‘é“é€‚é…è¡¥ä¸çš„ä½ç½®ã€‚</p>
</li>
<li>
<p>åœ¨NoneBotä¸­ï¼Œ<code v-pre>bot.py</code> æ‰€åœ¨çš„ç›®å½•ä¸º <code v-pre>æ ¹ç›®å½•</code></p>
</li>
<li>
<p>å¯æ ¹æ®æ­¤ <code v-pre>æ ¹ç›®å½•</code> æ›´æ”¹ç›¸å¯¹ä½ç½®</p>
</li>
</ul>
<hr>
<h3 id="ç¯å¢ƒè®¾ç½®" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒè®¾ç½®" aria-hidden="true">#</a> ç¯å¢ƒè®¾ç½®</h3>
<ul>
<li>
<p>é¢‘é“çš„ <code v-pre>@æ–¹å¼</code> åœ¨æœ€æ–°é¢‘é“è¡¥ä¸å·²å®ç°ï¼Œå¯ä»¥é€‰æ‹© <code v-pre>å¼€å¯</code> æˆ– <code v-pre>å…³é—­</code>ã€‚</p>
<ul>
<li>åœ¨ä½ çš„ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½® ï¼ˆå¦‚ï¼š<code v-pre>.env.dev</code> ä¸­ï¼‰ï¼Œ</li>
<li>æ–°å»ºä¸€è¡Œï¼Œå†™å…¥ï¼š<code v-pre>Haruka_TO_ME=False</code>ã€‚</li>
<li><code v-pre>Haruka_TO_ME=False</code> å…³é—­ @</li>
<li><code v-pre>Haruka_TO_ME=True</code> å¼€å¯ @</li>
</ul>
</li>
<li>
<p>è®¾ç½®é¢‘é“ç®¡ç†å‘˜èº«ä»½ç»„ï¼š</p>
<ul>
<li>æ–°å»ºä¸€è¡Œï¼Œå†™å…¥ï¼š<code v-pre>HARUKA_GUILD_ADMIN_GROUPS=[&quot;xxx&quot;,&quot;Haruka&quot;]</code></li>
<li>å°† <code v-pre>xxx</code> æ›¿æ¢ä¸ºä½ çš„èº«ä»½ç»„çš„åç§°</li>
<li>è¯¦æƒ…è§ <code v-pre>å®‰è£…</code> --&gt; <code v-pre>è®¾ç½®é¢‘é“ç®¡ç†å‘˜èº«ä»½ç»„</code></li>
</ul>
</li>
</ul>
<hr>
<h3 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h3>
<ul>
<li>
<p><strong>å‡è®¾ <code v-pre>haruka_bot</code> ç›®å½•ä¸º <code v-pre>æ ¹ç›®å½•</code>ï¼š</strong></p>
<ul>
<li>
<p>æ›¿æ¢ <code v-pre>database</code> ç›®å½•ä¸‹çš„ <code v-pre>models.py</code></p>
</li>
<li>
<p>æ›¿æ¢ <code v-pre>database</code> ç›®å½•ä¸‹çš„ <code v-pre>db.py</code></p>
</li>
<li>
<p>æ›¿æ¢ <code v-pre>utils</code> ç›®å½•ä¸‹çš„ <code v-pre>__init__.py</code></p>
</li>
<li>
<p>æ›¿æ¢ <code v-pre>plugins</code> ç›®å½•ä¸‹çš„ <code v-pre>__init__.py</code></p>
</li>
<li>
<p>æ›¿æ¢ <code v-pre>plugins</code> --&gt; <code v-pre>sub</code> ç›®å½•ä¸‹çš„ <code v-pre>add_sub.py</code> å’Œ <code v-pre>delete_sub.py</code></p>
</li>
<li>
<p>å¤åˆ¶ <code v-pre>plugins</code> ç›®å½•ä¸‹çš„ <code v-pre>guildadmin</code> åˆ°ä½ çš„ <code v-pre>plugins</code> ç›®å½•</p>
</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®é¢‘é“è¶…çº§ç”¨æˆ·ï¼Œä»¥ä¸‹æ­¥éª¤äºŒé€‰ä¸€ ï¼ï¼ï¼</strong></p>
<ol>
<li>å°† <code v-pre>GuildSuperUsers.py</code> æ”¾åˆ° <code v-pre>æ ¹ç›®å½• haruka_bot</code> ä¸­ï¼š
<ul>
<li>ä¿®æ”¹ <code v-pre>GuildSuperUserList = [&quot;xxxxxx&quot;,&quot;xxxxxx&quot;]</code></li>
<li>å°† <code v-pre>xxxxxx</code> æ›¿æ¢ä¸ºä½ è¦è®¾ç½®çš„è¶…çº§ç”¨æˆ·çš„ <code v-pre>é¢‘é“ç”¨æˆ·ID</code></li>
</ul>
</li>
<li>åœ¨ <code v-pre>æ ¹ç›®å½•haruka_bot</code> ç›®å½•æ–°å»º <code v-pre>GuildSuperUsers.py</code>
<ul>
<li>è¾“å…¥ <code v-pre>GuildSuperUserList = [&quot;xxxxxx&quot;,&quot;xxxxxx&quot;]</code>ï¼š</li>
<li>å°† <code v-pre>xxxxxx</code> æ›¿æ¢ä¸ºä½ è¦è®¾ç½®çš„è¶…çº§ç”¨æˆ·çš„ <code v-pre>é¢‘é“ç”¨æˆ·ID</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p><strong>è®¾ç½®é¢‘é“ç®¡ç†å‘˜ï¼š</strong></p>
<ul>
<li>åœ¨é¢‘é“ä¸­ä½¿ç”¨å‘½ä»¤ <code v-pre>æ·»åŠ  / å–æ¶ˆ @xxx</code> å³å¯è¿›è¡Œç®¡ç†å‘˜çš„å¢å‡æ“ä½œ</li>
<li>ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ <code v-pre>å…³æ³¨ / å–å…³</code> åŠŸèƒ½</li>
<li>åªæœ‰ <strong>è¶…çº§ç”¨æˆ·</strong> æ‰å¯ä»¥å¢å‡ç®¡ç†å‘˜</li>
<li>é€šè¿‡ <code v-pre>@</code> å¯¹ç®¡ç†å‘˜è¿›è¡Œå¢å‡æ“ä½œ</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®é¢‘é“ç®¡ç†å‘˜èº«ä»½ç»„ï¼š</strong></p>
<ul>
<li>æ–°å»ºä¸€è¡Œï¼Œå†™å…¥ <code v-pre>Haruka_GUILD_ADMIN_NAME = [&quot;xxx&quot;, &quot;xxxx&quot;]</code>ï¼Œ</li>
<li>å°† <code v-pre>xxx</code> æ›¿æ¢ä¸ºä½ çš„é¢‘é“ç®¡ç†å‘˜çš„èº«ä»½ç»„çš„åç§°ï¼Œ</li>
<li>æ”¯æŒå¤šä¸ªèº«ä»½ç»„ï¼ˆå…¶å®æ˜¯ç›®å‰æ²¡æœ‰ä¸€é”®æŒªäººçš„åŠŸèƒ½ï¼Œå¹²è„†ç›´æ¥å¤šä¸ªç»„è§£å†³ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</div></template>
