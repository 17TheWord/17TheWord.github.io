# 多人联机

---

::: tip 联机要点
 注意，如果在联机部分有看不懂的名词如 `IP`、`端口`、`内网穿透`，那说明你需要补充 **网络基础概念**。

 以下内容将会分为三个部分：`网络基础概念普及`、`MC 客户端联机` 以及 `开服联机`。

 **新大佬** 建议仔细阅读所有内容，这对于后续联机有很多帮助，前面的铺垫也更容易理解每一步操作的含义。
:::

- ***网络基础概念普及：***

  - **IP 地址：**

      - 我们进入服务器需要输入一个服务器地址，即 `IP 地址`，
      - 它的形式可以是数字的，如 `127.0.0.1`，也可以是 **英文域名**，如 `mc.hypixel.net`，
      - 当然域名的作用只是让数字IP变得更有辨识度，在进入的过程中，你的电脑还会访问 `DNS 服务器` 去获取到这个域名的 `实际 IP`，
      - 有时候输入域名却无法进入服务器就是因为你访问的 `DNS 服务器` 里没有这个 **域名** 的 `IP 记录`，电脑没拿到 `实际的 IP 地址` 自然也就进不去服务器。
      - 解决方法是在网络设置更换你的 `DNS服务器` 地址，一般可以设为 `8.8.8.8`（谷歌），备用 `114.114.114.114`（114）。

  ---

  - **端口：**

      - 有时候你经常看得见服务器地址后面带着一个数字，比如 `play.shaoxiu.net:30000`， 这个 `30000` 便是 **端口**，
      - 端口的作用就像是你房子的门，要进入一个服务器就得经过它的 **门 —— 端口**，
      - 要注意的是，很多没有带端口的地址是因为MC默认进入 `25565` 这个端口，所以服务器地址可以省略掉它，
      - 例如：`play.shaoxiu.net` 等价于 `play.shaoxiu.net:25565`。

  ---

  - **内网穿透/端口映射**：

      - 首先我们需要了解 `内网` 与 `外网` 的区别，
      - `内网` 就是你家里路由器连着的各个设备提供的一个网络环境，就像是你的房子; `外网` 则是其他的房子，
      - `内网穿透/端口映射` 即把家门打开，这样外人就能进来，
      - 你可以自由控制内部的哪个端口 `穿透/映射` 到外部的哪个端口，但你发给别人的地址一定是 **外网 IP** + **外部端口**。

  ---

- **联机部分：**

    - 对于少数两三个人而言，建议使用联机而非开服。原因有两点：
        - 联机的稳定性要差于开服（即无法 `24 H` 运行，服主即开通局域网映射的一方无法退出游戏），但对于性能（`内存`、`CPU`）的占用要优于开服，人数少会弥补稳定性上的缺点。
        - 开服需要自行寻找各类核心，了解不同插件 `Mod` 的 `API` 等大量基础知识，且少数人无法体现出插件管理的作用。

    - 如果你是 **正版玩家**，可以直接往下看 `映射` 部分。而离线模式登入的玩家需要了解一下验证的问题。由于自 `1.8` 开始客户端之间互相联机需要通过正版验证，我们需要想办法绕过这个验证才能进入游戏，否则映射成功也无法进入游戏。
    ---
    - 离线玩家绕过正版的方法有两种：

      **第一种：**

        1. 在顶部导航栏点击皮肤站，在里面注册一个自己的账号，
        2. 收到邮件验证成功后，在用户中心将 `Yggdrasil` 地址贴入 `PCL2` 的外置登录页面，
        3. `版本设置`->`设置`->`下滑到底部`->`修改登录方式为`-> `第三方登录：Authlib-Injector`，或者直接点按钮拖到 `HMCL` 可以直接 `添加认证服务器地址`，
        4. 随后输入注册的账号（邮箱）、密码即可进入游戏并进行下一步联机准备。此方法的好处是可以自定义皮肤与披风，但联机的人都需要注册此皮肤站的账号并登录方可进入。

      ---
  
      **第二种：**

        1. 在 `PCL2` 搜索 `简单联机 Mod` 并下载。 版本高于 `1.12.2` 的需跳转至 `mcmod` 网页 在评论区找到最新版本的下载链接，
        2. 随后启动游戏后，关闭 `config` 文件夹里的 `server.properties` 配置文件的正版验证，
        3. `online-mode: true --> online-mode: false`，
        4. 再 **重启** 客户端即可，
        5. 此方法的好处是其他玩家可以用离线账号直接进入，甚至可以修改配置文件固定内网端口，免去每次开局域网都要修改映射的麻烦，但自定义皮肤披风需要其他 `Mod` 解决。

---

::: warning 注意
以下两种方法任选其一
:::

- 第一种方法：

    1. **P2P 联机：** 打开 `PCL2` -> `进入更多`-> `联机`，

    2. 在客户端进入单人游戏地图后，服主打开对局域网开放，并点击 `PCL2` 的 `创建房间`，将端口号输进弹出的窗口，随后你就发现多了一个 `我的房间`，

    3. 单击一下即可复制你的 `房间码`。将它发给你的基友，基友在 `PCL` 同样的联机界面点击 `加入房间`，输入房间码即可获取到一个 `IP:端口` 的地址，

    4. 将它输进 `多人游戏` -> `直接连接` 的 `服务器地址栏` 里即可 **进入服务器**。

---

- 第二种方法:

    1. 内网穿透：进入游戏后，服主需要打开对局域网开放，并将左下角开放的端口号输入映射软件的内网端口位置（这里以 Netplus 为例），

    2. 填写完后在主界面点击启动，再点击复制连接地址，把它发给别人，就能进入你的服务器了，

    3. 对于联机还有疑问的，可以看如下视频：

  <iframe src="//player.bilibili.com/player.html?bvid=BV15E411p7bK&cid=161122177&page=1" scrolling="no" border="0" frameborder="no" framespacing="0"></iframe>

